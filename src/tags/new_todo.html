<new_todo>
    <style>
        .bottom {
            text-align: right;
        }
    </style>
    <div>
        <input type="text" name="todo" placeholder="任务名称">
    </div>
    <div>
        <textarea type="text" name="description" placeholder="任务详情"></textarea>
    </div>
    <div class="children">

    </div>
    <div class="bottom">
        <div class="btn btn-cancel" onclick="{cancel}">取消</div>
        <div class="btn btn-primary" onclick="{submit}">确定</div>
    </div>
    <script>
        var self = this;
        self.type = self.opts.type || 'todo';
        self.cancel = function () {
            if (self.opts.hide) {
                self.opts.hide();
            }
        };
        self.submit = function () {
            var name = self.todo.value;
            var description = self.description.value;
            var server = web.services[self.opts.type];
            if (!server) {
                web.message('未知操作');
                return self.cancel();
            }
            server.new({
                name: self.todo.value
            }, function (data) {
                if (data && data.code == 0) {
                    web.message('添加成功！');
                    self.cancel();
                } else {
                    web.message((data && data.message) || '添加失败！');
                }
            });
        }
    </script>
</new_todo>